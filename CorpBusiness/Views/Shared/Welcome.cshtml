
@model CorpBusiness.Models.Vendor


@{
    ViewBag.Title = "Welcome";
    Layout = "~/Views/Shared/_SiteLayout.cshtml";
}

<h2>Welcome In Corporate Business World!</h2>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>


<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.5/leaflet.css" />
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript" src="http://cdn.leafletjs.com/leaflet-0.5/leaflet.js"></script>
<script type="text/javascript">
    var address, lat, lon;
    var map;
    function loc1() {

        document.getElementById("map_canvas").innerHTML = "";
        address = document.getElementById("Pin").value
        //  alert(address);
        var geocoder = new google.maps.Geocoder();

        geocoder.geocode({ 'address': address }, function (results, status) {

            if (status == google.maps.GeocoderStatus.OK) {

                lat = results[0].geometry.location.lat();

                lon = results[0].geometry.location.lng();

                document.getElementById("Longitude").value = lon;
                document.getElementById("Latitude").value = lat;


                map = L.map('map_canvas').setView([lat, lon], 12, true);


                L.tileLayer('http://{s}.tile.cloudmade.com/BC9A493B41014CAABB98F0471D759707/997/256/{z}/{x}/{y}.png', {
                    maxZoom: 18,
                    attribution: 'Map'
                }).addTo(map);

                L.control.scale().addTo(map);

                L.marker([lat, lon]).addTo(map)
			.bindPopup("<b>Hello!</b><br />...").openPopup();
                //"<b>Hello!</b><br />..."

                var popup = L.popup();
                function onMapClick(e) {
                    popup
				.setLatLng(e.latlng)
                    //.setContent("You clicked the map at " + e.latlng.toString())
				.openOn(map);

                    ///////////////////////////
                    //L.marker(e.latlng).addTo(map)

                    document.getElementById("Longitude").value = e.latlng.lng.toString();
                    document.getElementById("Latitude").value = e.latlng.lat.toString();
                }

                map.on('click', onMapClick);

            }
        });



        //  map.on('click', onMapClick);
    }
    </script>

    <script type="text/javascript">
        var linkad = "";
        function split() {
            var str = document.getElementById("addrs").value;
            //  alert(str);
            // var partsOfStr = str.split('~');          
            var stringArray = new Array();
            var addlink = '';
            stringArray = str.split("~");

            for (i = 0; i < stringArray.length; i++) {
                //document.write("<br /> Array[" + i + " ]= " + stringArray[i]);
                //alert(+stringArray[i]);               
                //  linkadd = stringArray[i];
                // addlink = stringArray[i];
                addlink = addlink + stringArray[i] + '\r\n';
            }
            return nameContent;
            // alert(addlink);
            //document.getElementById("linkadd").value = addlink;
        }

    </script>
@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <table>
        <tr>
        <th>
            Address:
        </th>
       
      
        <th>
            Zip:
        </th>
      
      
        <th>
            Phone:
        </th>
        </tr>
        @foreach (var item in (List<String>)ViewData["addrs"])
        {
        <tr>
                <td> @Html.Label("Addr", @item)</td>
               
              
              @* <td>@Html.Label("linkadd", @addlink)</td> *@
        </tr>
        }

        </table>

         <table width="100%" align="center">
         <tr>
        <td width="40%" style="text-align:right">
        Country :
        </td>
        <td class="editor-field">
         @Html.DropDownListFor(m => m.Country, new SelectList(Model.StateModel, "Id", "StateName"), new { @id = "ddlstate", @style = "width:150px;" })
            @Html.ValidationMessageFor(model => model.StateModel)
        </td>

         <td width="40%" style="text-align:right">
         State:
        </td>
        <td class="editor-field">
         @Html.EditorFor(model => model.State)
            @Html.ValidationMessageFor(model => model.State)
        </td>

        <td width="40%" style="text-align:right">
         City:
        </td>
        <td class="editor-field">
         @Html.EditorFor(model => model.City)
            @Html.ValidationMessageFor(model => model.City)
        </td>
 </tr>
        <tr>
        <td width="40%" style="text-align:right">
         Category:
        </td>
        <td class="editor-field">
         @Html.DropDownListFor(x => x.Catgry, Model.Manufacturers, "select")
            @Html.ValidationMessageFor(model => model.Catgry)
        </td>
        </tr>
        </table>
        <table width="100%" align="center">
        <tr>
        <td style="text-align:center">
        <input type="submit" value="Show Map" onclick="javascript:split();" />
        
        </td>
        </tr>
        
        </table>
         @*@ViewBag.MyList*@
       
       
        
    </fieldset>
    <td align="Left" style=" vertical-align:top;">
     <div id="map_canvas" style="height:400px; width:700px; border:1px solid black" >
    </div>
    </td>
    
}








